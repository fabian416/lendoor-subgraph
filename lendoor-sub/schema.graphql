"""
Actividad del vault: depósitos, retiros, borrows, repays.
"""
type VaultActivity @entity(immutable: true) {
  id: ID!

  type: String!
  account: Bytes!
  counterparty: Bytes

  assets: BigInt!
  shares: BigInt

  txHash: Bytes!
  logIndex: BigInt!

  blockNumber: BigInt!
  blockTimestamp: BigInt!
}

"""
Snapshots del estado del vault (para APY, gráficas, etc.)
"""
type VaultStatusSnapshot @entity(immutable: true) {
  id: ID!

  totalShares: BigInt!
  totalBorrows: BigInt!
  accumulatedFees: BigInt!
  cash: BigInt!
  interestAccumulator: BigInt!
  interestRate: BigInt!

  vaultTimestamp: BigInt!

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  txHash: Bytes!
  logIndex: BigInt!
}

type ProtocolStat @entity(immutable: false) {
  id: ID!
  loansOriginated: BigInt!
  uniqueBorrowers: BigInt!
  lastUpdated: BigInt!
}

type Borrower @entity(immutable: true) {
  id: ID! # address
  firstSeen: BigInt!
}
